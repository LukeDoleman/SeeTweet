extends layout

block head_scripts
  link(rel='stylesheet', href='/stylesheets/ion.rangeSlider.css')
  link(rel='stylesheet', href='/stylesheets/ion.rangeSlider.skinFlat.css')

block head
    nav.navbar.navbar-default(role='navigation')
        //- Brand and toggle get grouped for better mobile display
        .navbar-header
            button.navbar-toggle(type='button', data-toggle='collapse', data-target='#navbar-collapse-1')
                span.sr-only Toggle navigation
                span.icon-bar
                span.icon-bar
                span.icon-bar
        .navbar-center.navbar-brand(href='#')
            a.navbar-brand(style="float:none;" href="#") SeeTweet
        //- Collect the nav links, forms, and other content for toggling
        #navbar-collapse-1.collapse.navbar-collapse
            ul.nav.navbar-nav.navbar-left
                li
                    a(href='#')
                        span.glyphicon.glyphicon-home
                li
                    a(id='getProfile' href='javascript:void();') Your Profile
                li
                    a(id='getStatistics' href='javascript:void();') Statistics

block main
  .container
    .alert.alert-info.alert-dismissible(role='alert')
      button.close(type='button', data-dismiss='alert', aria-label='Close')
        span(aria-hidden='true') Ã—
      strong Welcome to SeeTweet -
      |  This site aims to give you an
      |  insight into the tweeting habits of your profile. <br/><br/>
      |  The graph below shows a network of the other twitter users you interact
      |  with most often. Click on a user to see their timeline and change the
      |  date slider to observe changes in your network throughout the average day.

  div.col-lg-6
    div.col-lg-10
      input(type='text', id="range" value="" name="range")
    div.col-lg-2(style="height:60px;padding-top:15px;")
      button(id="graphUpdate" type="button" class="btn btn-info" style="background-color:#55acee") Update
    svg(style="display:block;margin:auto;" width="600" height="500")
      //- - var slider = new Slider('#ex2', {});
      //- input(id="ex2" type="text" class="span2" value="" data-slider-min="10" data-slider-max="1000" data-slider-step="5" data-slider-value="[250,450]")
  div.col-lg-6
      div(id="twitter-wrapper")

block scripts
  script(src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js")
  script(src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js")
  script(src="/javascripts/file.js")
  script(src="https://d3js.org/d3.v4.min.js")
  script(src="/javascripts/ion.rangeSlider.min.js")
  script.
    $(function () {
        $("#range").ionRangeSlider({
            hide_min_max: true,
            keyboard: true,
            min: 0,
            max: 24,
            from: 0,
            to: 24,
            type: 'double',
            step: 1,
            grid: true,
            onFinish: function (data) {
                console.log(data);
                var trimmedUrl = document.URL.substring(0, document.URL.indexOf("&"));
                var url = trimmedUrl + '&' + 'time=' + data.from + ',' + data.to;
                history.replaceState('data to be passed', 'Title of the page', url);
            }
        });
    });
  script.
      window.twttr = (function(d, s, id) {
          var js, fjs = d.getElementsByTagName(s)[0],
              t = window.twttr || {};
          if (d.getElementById(id)) return t;
          js = d.createElement(s);
          js.id = id;
          js.src = "https://platform.twitter.com/widgets.js";
          fjs.parentNode.insertBefore(js, fjs);

          t._e = [];
          t.ready = function(f) {
              t._e.push(f);
          };
      return t;
      }(document, "script", "twitter-wjs"));
  script.
      var local_data = !{JSON.stringify(result)};
      console.log(local_data);
  script(src="/javascripts/graph.js")
